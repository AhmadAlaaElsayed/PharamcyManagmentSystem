@{
    ViewBag.Title = "LoadCategory";
}

<h2>LoadCategory</h2>

@using (Html.BeginForm())
{
    <br />
    <div style="width:350px" >
        @Html.Label("emplloyee =   ")
        @Html.Label(Session.SessionID.ToString()) &nbsp; &nbsp;&nbsp; &nbsp;
        @Html.Label("Date =   ")
        @Html.Label(DateTime.Today.Date.ToString())
        <br />
    </div>
    <div>
        @Html.Label("select Category")
    
        @if (ViewData.ContainsKey("Category"))
        {
            @Html.DropDownList("Category", ViewData["Category"] as List<SelectListItem>, "Please select a Category", new { style = "width:250px", @class = "dropdown1" })
        }
    </div>
    <br />
    <div>
        @Html.Label("select Product")
        @Html.DropDownList("Product", new SelectList(string.Empty, "Value", "Text"), "Please select a product", new { style = "width:250px", @class = "dropdown1" })
    </div>
    <br />
    <div>
        @Html.Label("select Product size")
        @Html.DropDownList("ProductSize", new SelectList(string.Empty, "Value", "Text"), "Please select Product Size", new { style = "width:250px", @class = "dropdown1" })
        <label id="Unit">Unit</label>
     </div>
    <br />
    <div>
        @Html.Label("select Supplier")
        @Html.DropDownList("Supplier", new SelectList(string.Empty, "Value", "Text"), "Please select Suplier", new { style = "width:250px", @class = "dropdown1" })
    </div>
    <br /> 
    <div>
        @Html.Label("Quantity")
        <input id="QuantityTextbox" type="text" />
    </div>
    <br /> 
    <div>
        <button name="AddProductBtn" type="submit"> Add Another Product </button> 
        <button name="OrderBtn" type="submit"> Order </button>
        <br/>
        <label id="ErrorLbl"></label>
    </div>
    <br /> 
    <div>
        @Html.Label("Ordered Items Detail")
        <table style="width:100%;"><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td></tr></table>
    </div>
    <div>
        <br /> <br /> <br /> 
       
    </div>
    
    
    
    <script src="/Scripts/jquery-1.10.2.js" type="text/javascript"></script>
    <script src="/Scripts/jquery-1.10.2.min.js" type="text/javascript"></script>
    <script type="text/javascript">
 //Get Product on Category index change
    $(document).ready(function () {
         $("#Category").change(function () {
             $("#Product").empty();
             $("#ProductSize").empty();
             $("#Supplier").empty();
            
             $.ajax({
                 type: 'POST', url: '@Url.Action("GetProduct")', dataType: 'json', data: { id: $("#Category").val() },
                success: function (Products) {
                    $.each(Products, function (i, Product) {
                    $("#Product").append('<option value="' + Product.Value + '">' + Product.Text + '</option>');
                    });
                    document.getElementById("ErrorLbl").innerHTML = "";
                },
                error: function (ex) { document.getElementById("ErrorLbl").innerHTML = "please Select a Category"; }
             });
             $.ajax({  //Get unit of Category on index change
                 type: 'POST', url: '@Url.Action("GetUnit")', dataType: 'json', data: { id: $("#Category").val() },
                 success: function (Units) {
                     $.each(Units, function (i, unit) {
                         document.getElementById("Unit").innerHTML = unit.Text;
                         document.getElementById("ErrorLbl").innerHTML = "";
                      });                                            
                 },
                 error: function (ex) { document.getElementById("ErrorLbl").innerHTML = "please Select a Category"; }
             });
           return false;
        })
    });

    </script>

    <script type="text/javascript">
    //Get Productsize of respective product
       // $(document).ready(function () {
        $("#Product").change(function () {
            $("#ProductSize").empty();
              $.ajax({
                  type: 'POST', url: '@Url.Action("GetProductSize")', dataType: 'json',
                  data: { id: $("#Product").val() },
                   success: function (Sizez) { $.each(Sizez, function (i, Size) {
                                 $("#ProductSize").append('<option value="' + Size.Value + '">' + Size.Text + '</option>');
                });
                },
                error: function (ex) { alert('Failed to retrieve Product Size.' + ex);}
            });
            return false;
        })
   // });
    </script>
    
    
    
     @*<script type="text/javascript">
    //Get supplier list of specific product
       // $(document).ready(function () {
         $("#ProductSize").change(function () {
            $("#Supplier").empty();
            $("#Supplier").append('<option value="' + '0' + '">' + 'Select Product Supplier' + '</option>');
              $.ajax({
                  type: 'POST', url: '@Url.Action("GetSupplier")', dataType: 'json',
                  data: { id: $("#ProductSize").val() },
                   success: function (supplierz) { $.each(supplierz, function (i, supplier) {
                       $("#Supplier").append('<option value="' + supplier.Value + '">' + supplier.Text + '</option>');
                });
                },
                error: function (ex) { alert('Failed to retrieve supplier.' + ex);}
            });
            return false;
        })
   // });
    </script>*@
}


@*$.ajax({
                         type: 'POST', url: '@Url.Action("GetUnit")', dataType: 'json', data: { id: $("#Category").val() },
                        success: function (Units) {
                        $.each(units, function (i, Unit) {
                        //document.getElementById("lable").innerHTML = Units;
                        alert(' Unit.' + Unit);
                        });
                        },
                        error: function (ex) { alert('Failed to retrieve Unit.' + ex); }
                        });*@